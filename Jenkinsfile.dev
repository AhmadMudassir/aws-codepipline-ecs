pipeline {
  agent { label 'node1' }

  stages {
    stage('Install Dependencies') {
      steps {
        sh '''
          ls -a
          npm i express
        '''
      }
    }

    stage('Start or Restart App with PM2') {
      steps {
        sh '''
            pm2 start index.js --name node-app
            pm2 save
        '''
      }
    }
  }
}
